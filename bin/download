#!/usr/bin/env bash

set -euo pipefail

source "$(dirname "$0")/../lib/utils.sh"

git_download() {
  local version=$1
  local path=$2
  local install_type=$3
  local url_git="https://rakudo.org/dl/rakudo"

  if [ "$install_type" != "version" ]; then
    die "Install type '$install_type' not supported."
  fi

  echo "Downloading version $version to ${path}/tw ..."
  git_clone $version "${path}/tw"

  if [ "$?" -eq 0 ]; then
    echo "Download complete!"
  else
    die "Checksum verification failure."
  fi
}

git_download "$ASDF_INSTALL_VERSION" "$ASDF_DOWNLOAD_PATH" "$ASDF_INSTALL_TYPE"
